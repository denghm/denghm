I"<<h1 id="linux下扩展磁盘分区容量">Linux下扩展磁盘分区容量</h1>

<h3 id="1格式化剩余磁盘空间为新的磁盘">1.格式化剩余磁盘空间为新的磁盘</h3>

<p>[root@localhost]# fdisk /dev/sda</p>

<p>分别键入以下参数：</p>

<pre><code class="language-shell">p    查看已分区数量（我看到有两个 /dev/sda1 和/dev/sda2）
n    新增加一个分区
p    分区类型，选择主分区   
          分区号选3（1和2已占用，见上）     
          默认选择（起始扇区）回车     
          默认选择（结束扇区）
t    修改分区类型       
          选分区38e     修改为LVM（8e就是LVM）
w    写分区表，完成后退出fdisk命令
</code></pre>

<h3 id="2-使用partprobe重新读取分区表或者重启机器">2. 使用partprobe重新读取分区表或者重启机器。</h3>

<pre><code class="language-shell">partprobe
</code></pre>

<h3 id="3-初始化刚才的分区">3. 初始化刚才的分区</h3>

<pre><code class="language-shell">pvcreate /dev/sda3
</code></pre>

<p>** 不需要创建xfs文件系统 mkfs.xfs -f /dev/sda3，
这一步会创建 ，否则会出现以下错误</p>

<pre><code>WARNING: xfs signature detected on /dev/sda3 at offset 0. Wipe it? [y/n]: y Wiping xfs signature on /dev/sda3.
</code></pre>

<h3 id="4将初始化过的分区加入到虚拟卷组">4.将初始化过的分区加入到虚拟卷组</h3>

<pre><code class="language-shell">vgextend centos /dev/sda3
</code></pre>

<h3 id="5扩展已有卷的容量">5.扩展已有卷的容量</h3>

<pre><code>lvextend -l +100%FREE /dev/mapper/centos-root
</code></pre>

<h3 id="6在线扩容同步文件系统">6.在线扩容同步文件系统</h3>

<p>对不同的文件系统，不同的操作方式</p>

<p>xfs文件系统</p>

<pre><code> xfs_growfs /dev/mapper/centos-rootext2 
</code></pre>

<p>ext3 ext4 文件系统</p>

<pre><code>resize2fs 
</code></pre>

<p>btrfs文件系统</p>

<pre><code>btrfs filesystem resize max /home
</code></pre>

:ET